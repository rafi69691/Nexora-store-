<script type="text/javascript">
  var gk_isXlsx = false;
  var gk_xlsxFileLookup = {};
  var gk_fileData = {};
  function filledCell(cell) {
    return cell !== '' && cell != null;
  }
  function loadFileData(filename) {
    if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
      try {
        var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
        var firstSheetName = workbook.SheetNames[0];
        var worksheet = workbook.Sheets[firstSheetName];
        var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
        var filteredData = jsonData.filter(row => row.some(filledCell));
        var headerRowIndex = filteredData.findIndex((row, index) =>
          row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
        );
        if (headerRowIndex === -1 || headerRowIndex > 25) {
          headerRowIndex = 0;
        }
        var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
        csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
        return csv;
      } catch (e) {
        console.error(e);
        return "";
      }
    }
    return gk_fileData[filename] || "";
  }
</script>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nexora Dropshipping Store</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; scroll-behavior: smooth; }
    body { margin: 0; font-family: 'Inter', sans-serif; background-color: #f8f9fa; color: #0a0a23; line-height: 1.6; overflow-x: hidden; transition: background-color 0.3s, color 0.3s; }
    body.dark-mode { background-color: #1a1a1a; color: #e0e0e0; }
    .loader { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #0a0a23; display: flex; justify-content: center; align-items: center; z-index: 9999; transition: opacity 0.5s ease; }
    .loader::after { content: "Loading..."; color: white; font-size: 1.5rem; animation: blink 1s infinite; }
    @keyframes blink { 50% { opacity: 0.5; } }
    .loaded .loader { opacity: 0; pointer-events: none; }
    .navbar { background-color: #ffffff; padding: 1rem; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 100; }
    body.dark-mode .navbar { background-color: #2a2a2a; }
    .navbar input, .navbar select, .navbar button { padding: 0.5rem; margin: 0 0.5rem; border-radius: 5px; border: 1px solid #ccc; transition: border-color 0.3s ease; }
    body.dark-mode .navbar input, body.dark-mode .navbar select { background-color: #3a3a3a; color: #e0e0e0; border-color: #555; }
    .navbar input:focus, .navbar select:focus { border-color: #00bfff; outline: none; }
    .navbar .cart-btn { position: relative; }
    .navbar .cart-btn:hover { animation: cartShake 0.5s ease; }
    .navbar .user-info { font-size: 1rem; color: #0a0a23; }
    body.dark-mode .navbar .user-info { color: #e0e0e0; }
    .hamburger { display: none; font-size: 1.5rem; cursor: pointer; }
    .nav-links { display: flex; align-items: center; }
    @keyframes cartShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    header { position: relative; background: linear-gradient(135deg, #0a0a23, #1c2526); color: white; text-align: center; padding: 5rem 1rem; display: flex; flex-direction: column; align-items: center; animation: fadeIn 1.5s ease-in-out; overflow: hidden; }
    body.dark-mode header { background: linear-gradient(135deg, #121212, #1c1c1c); }
    header h1 { font-size: 3.5rem; margin-bottom: 1rem; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
    header p { font-size: 1.4rem; max-width: 600px; margin-bottom: 2rem; }
    header button { padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #00bfff, #0099cc); color: white; border: none; border-radius: 8px; font-size: 1rem; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; position: relative; }
    header button:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 6px 15px rgba(0,0,0,0.3); }
    header button:active { transform: translateY(1px); box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
    .particles { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 0; }
    .particle { position: absolute; width: 3px; height: 3px; background: rgba(255, 255, 255, 0.8); border-radius: 50%; animation: twinkle 3s infinite ease-in-out; }
    .particle:nth-child(odd) { animation-duration: 4s; }
    @keyframes twinkle {
      0% { opacity: 0.2; transform: scale(0.5); }
      50% { opacity: 1; transform: scale(1); }
      100% { opacity: 0.2; transform: scale(0.5); }
    }
    .dollar-container { width: 100px; height: 100px; margin: 2rem auto; position: relative; }
    .dollar-sign { font-size: 3rem; color: #00ff00; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); animation: dollarPulse 2s infinite ease-in-out; }
    .exchange-rate { font-size: 1rem; color: #fff; position: absolute; top: 70%; left: 50%; transform: translate(-50%, 0); text-align: center; }
    body.dark-mode .exchange-rate { color: #e0e0e0; }
    @keyframes dollarPulse {
      0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
      50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.7; }
    }
    .products { position: relative; overflow: hidden; }
    h2 { text-align: center; margin-bottom: 2rem; font-size: 2.5rem; animation: slideIn 1s ease; }
    .slider { display: flex; gap: 2rem; animation: slideProducts 15s infinite linear; width: max-content; }
    .slider:hover { animation-play-state: paused; }
    @keyframes slideProducts {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    .card { background-color: #ffffff; padding: 1.5rem; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); perspective: 1000px; min-width: 300px; cursor: pointer; }
    body.dark-mode .card { background-color: #2a2a2a; }
    .card-inner { position: relative; transition: transform 0.6s ease; transform-style: preserve-3d; }
    .card:hover .card-inner { transform: rotateY(10deg) rotateX(10deg); }
    .card img { max-width: 100%; height: auto; border-radius: 8px; margin-bottom: 1rem; transition: transform 0.5s ease; }
    .card:hover img { transform: scale(1.2) rotateY(5deg); }
    .card img[alt="fallback"] { background: #ccc; text-align: center; line-height: 200px; color: #666; }
    body.dark-mode .card img[alt="fallback"] { background: #444; color: #aaa; }
    .card .quantity-controls { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; }
    .card .quantity-controls button { padding: 0.3rem 0.6rem; }
    .card .rating { display: flex; align-items: center; gap: 0.3rem; margin-top: 0.5rem; }
    .card .rating span { cursor: pointer; font-size: 1.2rem; }
    .card .rating span.active { color: #ffd700; }
    .filters { display: flex; justify-content: center; gap: 1rem; margin-bottom: 2rem; }
    .filters select, .filters button { padding: 0.5rem; border-radius: 5px; border: 1px solid #ccc; transition: border-color 0.3s ease; }
    body.dark-mode .filters select { background-color: #3a3a3a; color: #e0e0e0; border-color: #555; }
    .filters select:focus { border-color: #00bfff; outline: none; }
    .testimonials, .cart, .wishlist { display: grid; gap: 2rem; }
    section { padding: 3rem 1rem; max-width: 1200px; margin: auto; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); justify-content: center; align-items: center; z-index: 1000; }
    .modal-content { background: white; padding: 2rem; border-radius: 12px; max-width: 500px; width: 90%; animation: popCart 0.5s ease; transform-style: preserve-3d; }
    body.dark-mode .modal-content { background: #2a2a2a; color: #e0e0e0; }
    @keyframes popCart {
      0% { transform: scale(0.5) rotateX(-20deg); opacity: 0; }
      100% { transform: scale(1) rotateX(0); opacity: 1; }
    }
    #quickViewModal img { transition: transform 0.3s ease; }
    #quickViewModal img:hover { transform: scale(1.5); }
    #loginModal .modal-content {
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: white;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      animation: loginFadeIn 0.5s ease;
    }
    @keyframes loginFadeIn {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    #loginModal h2 {
      background: linear-gradient(90deg, #00bfff, #ffffff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: textGlow 2s infinite alternate;
    }
    @keyframes textGlow {
      0% { text-shadow: 0 0 5px rgba(0,191,255,0.5); }
      100% { text-shadow: 0 0 15px rgba(0,191,255,1); }
    }
    #loginModal input {
      padding: 0.75rem 1rem;
      border: none;
      border-radius: 25px;
      margin: 0.5rem 0;
      background: rgba(255,255,255,0.1);
      color: white;
      font-size: 1rem;
      transition: all 0.3s ease;
    }
    #loginModal input::placeholder { color: rgba(255,255,255,0.7); }
    #loginModal input:focus {
      outline: none;
      background: rgba(255,255,255,0.2);
      box-shadow: 0 0 10px rgba(0,191,255,0.5);
      transform: scale(1.02);
    }
    #loginModal button {
      padding: 0.75rem 1.5rem;
      margin: 0.5rem;
      border: none;
      border-radius: 25px;
      background: linear-gradient(90deg, #00bfff, #0099cc);
      color: white;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    #loginModal button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,191,255,0.4);
      background: linear-gradient(90deg, #0099cc, #00bfff);
    }
    #loginModal button:active {
      transform: translateY(1px);
      box-shadow: 0 2px 5px rgba(0,191,255,0.2);
    }
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: linear-gradient(90deg, #00bfff, #0099cc);
      color: white;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1000;
      animation: slideInNotification 0.5s ease forwards;
      display: none;
    }
    @keyframes slideInNotification {
      0% { transform: translateX(100%); opacity: 0; }
      100% { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOutNotification {
      0% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(100%); opacity: 0; }
    }
    .contact-form, .checkout-form, .newsletter-form { display: flex; flex-direction: column; gap: 1rem; max-width: 500px; margin: auto; }
    .contact-form input, .contact-form textarea, .checkout-form input, .newsletter-form input { padding: 0.75rem; border: 1px solid #ccc; border-radius: 5px; font-size: 1rem; transition: border-color 0.3s ease; }
    body.dark-mode .contact-form input, body.dark-mode .contact-form textarea, body.dark-mode .checkout-form input, body.dark-mode .newsletter-form input { background-color: #3a3a3a; color: #e0e0e0; border-color: #555; }
    .contact-form input:focus, .checkout-form input:focus, .newsletter-form input:focus { border-color: #00bfff; outline: none; }
    footer { text-align: center; padding: 2rem; background: #0a0a23; color: white; }
    body.dark-mode footer { background: #121212; }
    footer a { color: #00bfff; text-decoration: none; }
    @media (max-width: 768px) {
      .hamburger { display: block; }
      .nav-links { display: none; flex-direction: column; position: absolute; top: 60px; left: 0; width: 100%; background: #ffffff; padding: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
      body.dark-mode .nav-links { background: #2a2a2a; }
      .nav-links.active { display: flex; }
      .navbar input, .navbar select, .navbar button { margin: 0.5rem 0; width: 100%; }
      .products, .testimonials, .cart, .wishlist { grid-template-columns: 1fr; }
      header h1 { font-size: 2.5rem; }
      header p { font-size: 1.2rem; }
    }
    @media (min-width: 768px) {
      .testimonials, .cart, .wishlist { grid-template-columns: repeat(3, 1fr); }
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
  </style>
</head>
<body>
  <div class="loader"></div>
  <div class="navbar">
    <div class="hamburger" onclick="toggleMenu()">☰</div>
    <div class="nav-links" id="navLinks">
      <input type="text" id="searchBar" placeholder="Search products..." oninput="searchProducts()">
      <select id="categoryFilter" onchange="filterProducts()">
        <option value="">All Categories</option>
        <option value="electronics">Electronics</option>
        <option value="fashion">Fashion</option>
        <option value="home">Home</option>
      </select>
      <select id="sortFilter" onchange="sortProducts()">
        <option value="">Sort By</option>
        <option value="priceLow">Price: Low to High</option>
        <option value="priceHigh">Price: High to Low</option>
      </select>
      <button id="themeToggle" onclick="toggleTheme()">🌙</button>
      <span class="user-info" id="userInfo">Guest</span>
      <button id="loginBtn" onclick="openModal('loginModal')">Login</button>
      <button id="logoutBtn" onclick="logoutUser()" style="display: none;">Logout</button>
      <button class="cart-btn" onclick="openModal('cartModal')">Cart (<span id="cartCount">0</span>)</button>
    </div>
  </div>
  <header>
    <div class="particles" id="particles"></div>
    <h1>Welcome to Nexora Store</h1>
    <p>Shop premium products with fast worldwide shipping!</p>
    <button onclick="document.querySelector('.products').scrollIntoView({behavior: 'smooth'})">Shop Now</button>
  </header>
  <div class="dollar-container">
    <div class="dollar-sign">$</div>
    <div class="exchange-rate" id="exchangeRate">Loading USD/BDT...</div>
  </div>
  <div class="notification" id="notification"></div>
  <section class="products">
    <h2>Our Products</h2>
    <div class="filters">
      <select id="categoryFilter2" onchange="filterProducts()">
        <option value="">All Categories</option>
        <option value="electronics">Electronics</option>
        <option value="fashion">Fashion</option>
        <option value="home">Home</option>
      </select>
      <select id="sortFilter2" onchange="sortProducts()">
        <option value="">Sort By</option>
        <option value="priceLow">Price: Low to High</option>
        <option value="priceHigh">Price: High to Low</option>
      </select>
    </div>
    <div class="slider" id="productList"></div>
  </section>
  <section id="recommendedSection"></section>
  <section class="testimonials">
    <h2>Customer Reviews</h2>
    <div class="card"><div class="card-inner"><p>"Super fast delivery and great quality!" - Alex T.</p></div></div>
    <div class="card"><div class="card-inner"><p>"My go-to dropshipping store!" - Dana M.</p></div></div>
    <div class="card"><div class="card-inner"><p>"Amazing products, highly recommend!" - Jordan R.</p></div></div>
  </section>
  <section class="cart">
    <h2>Shopping Cart</h2>
    <div id="cartItems"></div>
    <p>Subtotal: $<span id="cartSubtotal">0</span></p>
    <p>Tax (5%): $<span id="cartTax">0</span></p>
    <p>Total: $<span id="cartTotal">0</span></p>
    <button onclick="clearCart()">Clear Cart</button>
    <button onclick="openModal('checkoutModal')">Proceed to Checkout</button>
  </section>
  <section class="wishlist">
    <h2>Your Wishlist</h2>
    <div id="wishlistItems"></div>
  </section>
  <section>
    <h2>Track Your Order</h2>
    <form class="contact-form" onsubmit="trackOrder(event)">
      <input type="text" id="orderId" placeholder="Enter Order ID" required />
      <button type="submit">Track</button>
    </form>
  </section>
  <section>
    <h2>Subscribe to Newsletter</h2>
    <form class="newsletter-form" onsubmit="subscribeNewsletter(event)">
      <input type="email" id="newsletterEmail" placeholder="Your Email" required />
      <button type="submit">Subscribe</button>
    </form>
  </section>
  <section>
    <h2>Contact Us</h2>
    <form class="contact-form" onsubmit="submitContact(event)">
      <input type="text" placeholder="Your Name" required />
      <input type="email" placeholder="Your Email" required />
      <textarea rows="4" placeholder="Your Message" required></textarea>
      <button type="submit">Send</button>
    </form>
  </section>
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <h2>Login / Register</h2>
      <form onsubmit="loginUser(event)">
        <input type="email" id="loginEmail" placeholder="Email" required />
        <input type="password" id="loginPassword" placeholder="Password" required />
        <button type="submit">Login</button>
        <button type="button" onclick="registerUser()">Register</button>
        <button type="button" onclick="closeModal('loginModal')">Close</button>
      </form>
    </div>
  </div>
  <div id="cartModal" class="modal">
    <div class="modal-content">
      <h2>Your Cart</h2>
      <div id="cartModalItems"></div>
      <p>Subtotal: $<span id="cartModalSubtotal">0</span></p>
      <p>Tax (5%): $<span id="cartModalTax">0</span></p>
      <p>Total: $<span id="cartModalTotal">0</span></p>
      <button onclick="clearCart()">Clear Cart</button>
      <button onclick="openModal('checkoutModal')">Checkout</button>
      <button onclick="closeModal('cartModal')">Close</button>
    </div>
  </div>
  <div id="checkoutModal" class="modal">
    <div class="modal-content">
      <h2>Checkout</h2>
      <form class="checkout-form" onsubmit="processCheckout(event)">
        <input type="text" id="fullName" placeholder="Full Name" required />
        <input type="text" id="address" placeholder="Address" required />
        <input type="text" id="city" placeholder="City" required />
        <input type="text" id="postalCode" placeholder="Postal Code" required />
        <input type="text" id="promoCode" placeholder="Promo Code (e.g., SAVE10)" />
        <button type="button" onclick="applyPromoCode()">Apply Promo Code</button>
        <input type="text" id="cardNumber" placeholder="Card Number (Stripe Placeholder)" required />
        <button type="submit">Place Order</button>
        <button type="button" onclick="closeModal('checkoutModal')">Close</button>
      </form>
    </div>
  </div>
  <div id="quickViewModal" class="modal">
    <div class="modal-content">
      <h2 id="quickViewName"></h2>
      <img id="quickViewImage" src="" alt="Product" style="max-width: 100%; border-radius: 8px;" />
      <p id="quickViewPrice"></p>
      <p id="quickViewCategory"></p>
      <p>Average Rating: <span id="quickViewRating">Not rated yet</span></p>
      <div id="quickViewReviews"></div>
      <button onclick="addToCartFromQuickView()">Add to Cart</button>
      <button onclick="closeModal('quickViewModal')">Close</button>
    </div>
  </div>
  <div id="orderSummaryModal" class="modal">
    <div class="modal-content">
      <h2>Order Summary</h2>
      <div id="orderSummaryItems"></div>
      <p>Subtotal: $<span id="orderSubtotal">0</span></p>
      <p>Tax (5%): $<span id="orderTax">0</span></p>
      <p>Discount: $<span id="orderDiscount">0</span></p>
      <p>Total: $<span id="orderTotal">0</span></p>
      <p>Billing: <span id="orderBilling"></span></p>
      <button onclick="closeModal('orderSummaryModal')">Close</button>
    </div>
  </div>
  <footer>
    © 2025 Nexora Store. Built with passion by RAFI. Follow us on 
    <a href="https://www.facebook.com/WHiS.RAFi" target="_blank">Facebook</a> | 
    <a href="#" style="color: #00bfff;">Instagram</a> | 
    <a href="#" style="color: #00bfff;">Twitter</a>
  </footer>
  <script type="text/javascript">
    var Tawk_API = Tawk_API || {}, Tawk_LoadStart = new Date();
    (function(){
      var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
      s1.async = true;
      s1.src = 'https://embed.tawk.to/YOUR_PROPERTY_ID/default';
      s1.charset = 'UTF-8';
      s1.setAttribute('crossorigin', '*');
      s0.parentNode.insertBefore(s1, s0);
    })();
  </script>
  <script>
    window.addEventListener('load', () => {
      document.body.classList.add('loaded');
    });
    const particlesContainer = document.getElementById('particles');
    for (let i = 0; i < 100; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = Math.random() * 100 + '%';
      particle.style.top = Math.random() * 100 + '%';
      particle.style.animationDelay = Math.random() * 3 + 's';
      particlesContainer.appendChild(particle);
    }
    function fetchExchangeRate() {
      fetch('https://v6.exchangerate-api.com/v6/YOUR_API_KEY/latest/USD')
        .then(response => response.json())
        .then(data => {
          const rate = data.conversion_rates.BDT;
          document.getElementById('exchangeRate').textContent = `1 USD = ${rate.toFixed(2)} BDT`;
        })
        .catch(error => {
          console.error('Error fetching exchange rate:', error);
          document.getElementById('exchangeRate').textContent = 'USD/BDT unavailable';
        });
    }
    const products = [
      { id: 1, name: "iPhone Case", price: 9.99, category: "fashion", image: "https://images.unsplash.com/photo-1600585154347-4be3e13b5c3d?w=200" },
      { id: 2, name: "Smartwatch", price: 49.99, category: "electronics", image: "https://images.unsplash.com/photo-1579586337278-3befd40fd17a?w=200" },
      { id: 3, name: "Graphic T-Shirt", price: 19.99, category: "fashion", image: "https://images.unsplash.com/photo-1576566588028-4147f3848f27?w=200" },
      { id: 4, name: "LED Desk Lamp", price: 29.99, category: "home", image: "https://images.unsplash.com/photo-1600585154347-4be3e13b5c3d?w=200" },
      { id: 5, name: "Wireless Earbuds", price: 39.99, category: "electronics", image: "https://images.unsplash.com/photo-1590658006821-04f4008d5717?w=200" },
      { id: 6, name: "Leather Wallet", price: 24.99, category: "fashion", image: "https://images.unsplash.com/photo-1615333252415-3b537c79d57d?w=200" },
      { id: 7, name: "Smart Home Speaker", price: 89.99, category: "home", image: "https://images.unsplash.com/photo-1544244015-3a3f5b7db69f?w=200" }
    ];
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
    let users = JSON.parse(localStorage.getItem("users")) || {};
    let loggedInUser = JSON.parse(localStorage.getItem("loggedInUser")) || null;
    let reviews = JSON.parse(localStorage.getItem("reviews")) || {};
    let appliedDiscount = 0;
    const]` promoCodes = {
      "SAVE10": 0.10,
      "SAVE20": 0.20
    };
    const notificationData = [
      { name: "John from USA", product: "Smartwatch" },
      { name: "Emma from UK", product: "iPhone Case" },
      { name: "Rahul from India", product: "Wireless Earbuds" },
      { name: "Sophie from Canada", product: "Leather Wallet" }
    ];
    function showNotification() {
      const notification = document.getElementById("notification");
      const randomNotification = notificationData[Math.floor(Math.random() * notificationData.length)];
      notification.textContent = `${randomNotification.name} just bought a ${randomNotification.product}!`;
      notification.style.display = "block";
      setTimeout(() => {
        notification.style.animation = "slideOutNotification 0.5s ease forwards";
        setTimeout(() => {
          notification.style.display = "none";
          notification.style.animation = "slideInNotification 0.5s ease forwards";
        }, 500);
      }, 5000);
    }
    function toggleMenu() {
      const navLinks = document.getElementById("navLinks");
      navLinks.classList.toggle("active");
    }
    function toggleTheme() {
      document.body.classList.toggle("dark-mode");
      const themeToggle = document.getElementById("themeToggle");
      themeToggle.textContent = document.body.classList.contains("dark-mode") ? "☀️" : "🌙";
      localStorage.setItem("theme", document.body.classList.contains("dark-mode") ? "dark" : "light");
    }
    function displayProducts(filteredProducts = products) {
      const productList = document.getElementById("productList");
      if (!productList) return;
      productList.innerHTML = "";
      const doubledProducts = [...filteredProducts, ...filteredProducts];
      doubledProducts.forEach(product => {
        const avgRating = calculateAverageRating(product.id);
        const card = document.createElement("div");
        card.className = "card";
        card.onclick = (e) => {
          if (!e.target.closest(".rating") && !e.target.matches("button")) {
            openQuickView(product.id);
          }
        };
        const img = document.createElement("img");
        img.src = product.image;
        img.alt = product.name;
        img.onerror = () => {
          img.src = "";
          img.alt = "fallback";
          img.textContent = "Image Failed to Load";
        };
        const cardInner = document.createElement("div");
        cardInner.className = "card-inner";
        cardInner.appendChild(img);
        cardInner.innerHTML += `
          <h3>${product.name}</h3>
          <p>$${product.price}</p>
          <p>Average Rating: ${avgRating ? avgRating.toFixed(1) + " ★" : "Not rated yet"}</p>
          <div class="rating" data-product-id="${product.id}">
            <span onclick="rateProduct(${product.id}, 1)">★</span>
            <span onclick="rateProduct(${product.id}, 2)">★</span>
            <span onclick="rateProduct(${product.id}, 3)">★</span>
            <span onclick="rateProduct(${product.id}, 4)">★</span>
            <span onclick="rateProduct(${product.id}, 5)">★</span>
          </div>
          <button onclick="addToCart(${product.id})">Add to Cart</button>
          <button onclick="addToWishlist(${product.id})">Add to Wishlist</button>
        `;
        card.appendChild(cardInner);
        updateStarRating(product.id, avgRating);
        productList.appendChild(card);
      });
    }
    function calculateAverageRating(productId) {
      const productReviews = reviews[productId] || [];
      if (productReviews.length === 0) return 0;
      const totalRating = productReviews.reduce((sum, review) => sum + review.rating, 0);
      return totalRating / productReviews.length;
    }
    function updateStarRating(productId, avgRating) {
      const ratingElements = document.querySelectorAll(`.rating[data-product-id="${productId}"] span`);
      ratingElements.forEach((star, index) => {
        star.classList.toggle("active", index < Math.round(avgRating));
      });
    }
    function rateProduct(productId, rating) {
      if (!loggedInUser) {
        alert("Please login to leave a rating!");
        openModal("loginModal");
        return;
      }
      if (!reviews[productId]) reviews[productId] = [];
      reviews[productId].push({ user: loggedInUser.email, rating });
      localStorage.setItem("reviews", JSON.stringify(reviews));
      const avgRating = calculateAverageRating(productId);
      updateStarRating(productId, avgRating);
      alert(`Thank you for rating ${rating} stars!`);
    }
    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      if (product) {
        const cartItem = cart.find(item => item.id === productId);
        if (cartItem) {
          cartItem.quantity += 1;
        } else {
          cart.push({ ...product, quantity: 1 });
        }
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartCount();
        displayCart();
      }
    }
    function updateCartItemQuantity(index, change) {
      cart[index].quantity += change;
      if (cart[index].quantity <= 0) {
        cart.splice(index, 1);
      }
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartCount();
      displayCart();
    }
    function clearCart() {
      cart = [];
      localStorage.setItem("cart", JSON.stringify(cart));
      updateCartCount();
      displayCart();
    }
    function updateCartCount() {
      const cartCount = document.getElementById("cartCount");
      if (cartCount) cartCount.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
    }
    function displayCart() {
      const cartItems = document.getElementById("cartItems");
      const cartModalItems = document.getElementById("cartModalItems");
      if (!cartItems || !cartModalItems) return;
      cartItems.innerHTML = "";
      cartModalItems.innerHTML = "";
      let subtotal = 0;
      cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        subtotal += itemTotal;
        const itemDiv = document.createElement("div");
        itemDiv.className = "card";
        itemDiv.innerHTML = `
          <div class="card-inner">
            <p>${item.name} - $${item.price} x ${item.quantity} = $${itemTotal.toFixed(2)}</p>
            <div class="quantity-controls">
              <button onclick="updateCartItemQuantity(${index}, -1)">-</button>
              <span>${item.quantity}</span>
              <button onclick="updateCartItemQuantity(${index}, 1)">+</button>
            </div>
          </div>
        `;
        cartItems.appendChild(itemDiv);
        cartModalItems.appendChild(itemDiv.cloneNode(true));
      });
      const tax = subtotal * 0.05;
      const discount = subtotal * appliedDiscount;
      const total = subtotal + tax - discount;
      document.getElementById("cartSubtotal").textContent = subtotal.toFixed(2);
      document.getElementById("cartTax").textContent = tax.toFixed(2);
      document.getElementById("cartTotal").textContent = total.toFixed(2);
      document.getElementById("cartModalSubtotal").textContent = subtotal.toFixed(2);
      document.getElementById("cartModalTax").textContent = tax.toFixed(2);
      document.getElementById("cartModalTotal").textContent = total.toFixed(2);
    }
    function applyPromoCode() {
      const promoCodeInput = document.getElementById("promoCode");
      const code = promoCodeInput.value.toUpperCase();
      if (promoCodes[code]) {
        appliedDiscount = promoCodes[code];
        alert(`Promo code applied! You get ${appliedDiscount * 100}% off.`);
        displayCart();
      } else {
        alert("Invalid promo code!");
        appliedDiscount = 0;
      }
    }
    function addToWishlist(productId) {
      const product = products.find(p => p.id === productId);
      if (product && !wishlist.some(w => w.id === productId)) {
        wishlist.push(product);
        localStorage.setItem("wishlist", JSON.stringify(wishlist));
        alert(`${product.name} added to wishlist!`);
        displayWishlist();
      } else {
        alert("Product already in wishlist!");
      }
    }
    function removeFromWishlist(index) {
      wishlist.splice(index, 1);
      localStorage.setItem("wishlist", JSON.stringify(wishlist));
      displayWishlist();
    }
    function displayWishlist() {
      const wishlistItems = document.getElementById("wishlistItems");
      if (!wishlistItems) return;
      wishlistItems.innerHTML = "";
      wishlist.forEach((item, index) => {
        const itemDiv = document.createElement("div");
        itemDiv.className = "card";
        itemDiv.innerHTML = `
          <div class="card-inner">
            <p>${item.name} - $${item.price} <button onclick="removeFromWishlist(${index})">Remove</button></p>
          </div>
        `;
        wishlistItems.appendChild(itemDiv);
      });
    }
    function recommendProducts() {
      const recommendedSection = document.getElementById("recommendedSection");
      if (!recommendedSection) return;
      recommendedSection.innerHTML = `
        <h2>Recommended for You</h2>
        <div class="slider" id="recommendedList"></div>
      `;
      const recommendedList = document.getElementById("recommendedList");
      let recommended = [];
      if (cart.length > 0) {
        const cartCategories = [...new Set(cart.map(item => item.category))];
        recommended = products.filter(p => cartCategories.includes(p.category) && !cart.some(c => c.id === p.id));
      } else {
        recommended = products.sort(() => Math.random() - 0.5).slice(0, 3);
      }
      recommended.forEach(product => {
        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <div class="card-inner">
            <img src="${product.image}" alt="${product.name}" />
            <h3>${product.name}</h3>
            <p>$${product.price}</p>
            <button onclick="addToCart(${product.id})">Add to Cart</button>
          </div>
        `;
        recommendedList.appendChild(card);
      });
    }
    function searchProducts() {
      const searchBar = document.getElementById("searchBar");
      if (!searchBar) return;
      const query = searchBar.value.toLowerCase();
      const filteredProducts = products.filter(p => p.name.toLowerCase().includes(query));
      displayProducts(filteredProducts);
    }
    function filterProducts() {
      const categoryFilter = document.getElementById("categoryFilter");
      const categoryFilter2 = document.getElementById("categoryFilter2");
      const category = (categoryFilter && categoryFilter.value) || (categoryFilter2 && categoryFilter2.value);
      const filteredProducts = category ? products.filter(p => p.category === category) : products;
      displayProducts(filteredProducts);
    }
    function sortProducts() {
      const sortFilter = document.getElementById("sortFilter");
      const sortFilter2 = document.getElementById("sortFilter2");
      const sortBy = (sortFilter && sortFilter.value) || (sortFilter2 && sortFilter2.value);
      let sortedProducts = [...products];
      if (sortBy === "priceLow") {
        sortedProducts.sort((a, b) => a.price - b.price);
      } else if (sortBy === "priceHigh") {
        sortedProducts.sort((a, b) => b.price - a.price);
      }
      displayProducts(sortedProducts);
    }
    function openModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) modal.style.display = "flex";
    }
    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) modal.style.display = "none";
    }
    function openQuickView(productId) {
      const product = products.find(p => p.id === productId);
      if (product) {
        const avgRating = calculateAverageRating(productId);
        document.getElementById("quickViewName").textContent = product.name;
        document.getElementById("quickViewImage").src = product.image;
        document.getElementById("quickViewPrice").textContent = `Price: $${product.price}`;
        document.getElementById("quickViewCategory").textContent = `Category: ${product.category}`;
        document.getElementById("quickViewRating").textContent = avgRating ? avgRating.toFixed(1) + " ★" : "Not rated yet";
        const quickViewReviews = document.getElementById("quickViewReviews");
        quickViewReviews.innerHTML = reviews[productId] ? reviews[productId].map(r => `<p>${r.user}: ${r.rating} ★</p>`).join("") : "<p>No reviews yet.</p>";
        openModal("quickViewModal");
      }
    }
    function addToCartFromQuickView() {
      const productName = document.getElementById("quickViewName").textContent;
      const product = products.find(p => p.name === productName);
      if (product) {
        addToCart(product.id);
        closeModal("quickViewModal");
      }
    }
    function loginUser(event) {
      event.preventDefault();
      const loginEmail = document.getElementById("loginEmail");
      const loginPassword = document.getElementById("loginPassword");
      if (!loginEmail || !loginPassword) return;
      const email = loginEmail.value;
      const password = loginPassword.value;
      if (users[email] && users[email].password === password) {
        loggedInUser = { email };
        localStorage.setItem("loggedInUser", JSON.stringify(loggedInUser));
        updateUserInfo();
        alert("Logged in successfully!");
        closeModal("loginModal");
      } else {
        alert("Invalid email or password!");
      }
    }
    function registerUser() {
      const loginEmail = document.getElementById("loginEmail");
      const loginPassword = document.getElementById("loginPassword");
      if (!loginEmail || !loginPassword) return;
      const email = loginEmail.value;
      const password = loginPassword.value;
      if (users[email]) {
        alert("Email already registered!");
      } else if (password.length < 6) {
        alert("Password must be at least 6 characters!");
      } else {
        users[email] = { password };
        localStorage.setItem("users", JSON.stringify(users));
        alert("Registered successfully! Please login.");
        loginEmail.value = "";
        loginPassword.value = "";
      }
    }
    function logoutUser() {
      loggedInUser = null;
      localStorage.removeItem("loggedInUser");
      updateUserInfo();
      alert("Logged out successfully!");
    }
    function updateUserInfo() {
      const userInfo = document.getElementById("userInfo");
      const loginBtn = document.getElementById("loginBtn");
      const logoutBtn = document.getElementById("logoutBtn");
      if (loggedInUser) {
        userInfo.textContent = `Welcome, ${loggedInUser.email.split("@")[0]}`;
        loginBtn.style.display = "none";
        logoutBtn.style.display = "inline";
      } else {
        userInfo.textContent = "Guest";
        loginBtn.style.display = "inline";
        logoutBtn.style.display = "none";
      }
    }
    function processCheckout(event) {
      event.preventDefault();
      if (cart.length === 0) {
        alert("Your cart is empty!");
        return;
      }
      const fullName = document.getElementById("fullName").value;
      const address = document.getElementById("address").value;
      const city = document.getElementById("city").value;
      const postalCode = document.getElementById("postalCode").value;
      const billingDetails = { fullName, address, city, postalCode };
      localStorage.setItem("billingDetails", JSON.stringify(billingDetails));
      const orderId = Math.random().toString(36).substr(2, 9);
      localStorage.setItem("lastOrder", JSON.stringify({ orderId, cart, billingDetails }));
      displayOrderSummary(orderId, billingDetails);
      cart = [];
      localStorage.setItem("cart", JSON.stringify(cart));
      appliedDiscount = 0;
      updateCartCount();
      displayCart();
      closeModal("checkoutModal");
      alert(`Order placed! Your order ID is ${orderId}`);
    }
    function displayOrderSummary(orderId, billingDetails) {
      const orderSummaryItems = document.getElementById("orderSummaryItems");
      orderSummaryItems.innerHTML = "";
      let subtotal = 0;
      cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        subtotal += itemTotal;
        const itemDiv = document.createElement("div");
        itemDiv.innerHTML = `<p>${item.name} - $${item.price} x ${item.quantity} = $${itemTotal.toFixed(2)}</p>`;
        orderSummaryItems.appendChild(itemDiv);
      });
      const tax = subtotal * 0.05;
      const discount = subtotal * appliedDiscount;
      const total = subtotal + tax - discount;
      document.getElementById("orderSubtotal").textContent = subtotal.toFixed(2);
      document.getElementById("orderTax").textContent = tax.toFixed(2);
      document.getElementById("orderDiscount").textContent = discount.toFixed(2);
      document.getElementById("orderTotal").textContent = total.toFixed(2);
      document.getElementById("orderBilling").textContent = `${billingDetails.fullName}, ${billingDetails.address}, ${billingDetails.city}, ${billingDetails.postalCode}`;
      openModal("orderSummaryModal");
    }
    function trackOrder(event) {
      event.preventDefault();
      const orderIdInput = document.getElementById("orderId");
      if (!orderIdInput) return;
      const orderId = orderIdInput.value;
      const lastOrder = JSON.parse(localStorage.getItem("lastOrder"));
      if (lastOrder && lastOrder.orderId === orderId) {
        alert(`Order found! Status: Shipped. Items: ${lastOrder.cart.map(item => `${item.name} (x${item.quantity})`).join(", ")}`);
      } else {
        alert("Order not found!");
      }
    }
    function subscribeNewsletter(event) {
      event.preventDefault();
      const newsletterEmail = document.getElementById("newsletterEmail");
      if (!newsletterEmail) return;
      const email = newsletterEmail.value;
      alert(`Subscribed with ${email}!`);
    }
    function submitContact(event) {
      event.preventDefault();
      alert("Message sent! We'll get back to you soon.");
    }
    window.onload = () => {
      try {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          document.body.classList.add("dark-mode");
          document.getElementById("themeToggle").textContent = "☀️";
        }
        displayProducts();
        updateCartCount();
        displayCart();
        recommendProducts();
        displayWishlist();
        updateUserInfo();
        const savedBilling = JSON.parse(localStorage.getItem("billingDetails"));
        if (savedBilling) {
          document.getElementById("fullName").value = savedBilling.fullName;
          document.getElementById("address").value = savedBilling.address;
          document.getElementById("city").value = savedBilling.city;
          document.getElementById("postalCode").value = savedBilling.postalCode;
        }
        fetchExchangeRate();
        setInterval(showNotification, 10000);
        showNotification();
      } catch (e) {
        console.error("Error loading store:", e);
      }
    };
  </script>
  <script>
    const conversionRate = 110;
    document.querySelectorAll('[data-price-usd]').forEach(el => {
      const usd = parseFloat(el.getAttribute('data-price-usd'));
      const bdt = Math.round(usd * conversionRate);
      el.innerHTML += ` <small>(~৳${bdt})</small>`;
    });
  </script>
  <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9383f4a5af1d673e',t:'MTc0NTk4Mzc3NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>
